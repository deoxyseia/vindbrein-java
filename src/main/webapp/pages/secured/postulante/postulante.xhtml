<ui:composition template="/pages/templates/layout.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core">

	<ui:define name="title"> Información personal </ui:define>

	<ui:define name="content">

		<!--Postulante -->

		<h:form id="formPostulante">
			
				<h:panelGrid columns="2">
					<h:outputText value="Nombres :"></h:outputText>
					<p:inputText
						value="#{postulanteManagedBean.postulante.postNombres}"
						required="true" requiredMessage="Su nombre(s) es necesario" />

					<h:outputText value="Apellido paterno :"></h:outputText>
					<p:inputText
						value="#{postulanteManagedBean.postulante.postApellidoPaterno}"
						required="true" requiredMessage="Su apellido paterno es necesario" />

					<h:outputText value="Apellido materno :"></h:outputText>
					<p:inputText
						value="#{postulanteManagedBean.postulante.postApellidoMaterno}"
						required="true" requiredMessage="Su apellido materno es necesario" />

					<h:outputText value="Sexo :" />
					<p:selectOneMenu
						value="#{postulanteManagedBean.postulante.postSexo}"
						required="true" requiredMessage="Elija un sexo">
						<f:selectItem itemLabel="Elige uno" noSelectionOption="true" />
						<f:selectItem itemLabel="Masculino" itemValue="M" />
						<f:selectItem itemLabel="Femenino" itemValue="F" />
					</p:selectOneMenu>

					<h:outputText value="Fecha de nacimiento :" />
					<p:calendar
						value="#{postulanteManagedBean.postulante.postFecNacimiento}"
						showOn="button" />

					<h:outputText value="E-mail :"></h:outputText>
					<p:inputText
						value="#{postulanteManagedBean.postulante.usuario.usuaCorreo}"
						converterMessage="Ingrese un valor válido" required="true"
						requiredMessage="Su e-mail es necesario" />
				</h:panelGrid>

				<p:dataTable id="dataTableTelefono" rowKey="#{telefono.teleId}" 
					var="telefono"
					emptyMessage="No tiene registrado telefonos"
					editable="true" editMode="row"
					value="#{postulanteManagedBean.postulante.telefonos}"
					selection="#{postulanteManagedBean.selectedTelefono}"
					selectionMode="single">					
					
					<p:ajax event="rowEdit"
						listener="#{postulanteManagedBean.updateTelefono}"
						update=":formPostulante:dataTableTelefono" />
					<p:ajax event="rowEditCancel" update=":formPostulante:dataTableTelefono" />

					<f:facet name="header">
                    Lista de teléfonos
                    </f:facet>					

					<p:column headerText="Descripción">
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{telefono.teleDescripcion}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText value="#{telefono.teleDescripcion}"
									style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

					<p:column headerText="Número" >
						<p:cellEditor>
							<f:facet name="output">
								<h:outputText value="#{telefono.teleNum}" />
							</f:facet>
							<f:facet name="input">
								<p:inputText value="#{telefono.teleNum}" style="width:100%" />
							</f:facet>
						</p:cellEditor>
					</p:column>

<!-- 					<p:column > -->
<!-- 						<p:rowEditor /> -->
<!-- 					</p:column> -->
					
					<f:facet name="footer">
					<center>
						<p:commandButton value="Eliminar"
							actionListener="#{postulanteManagedBean.deleteTelefono()}"							
							icon="ui-icon-check">
						</p:commandButton>
						<p:commandButton value="Nuevo"	
							actionListener="#{postulanteManagedBean.reiniciarNewTelefono()}"						
							oncomplete="saveTelefonoDialog.show()"
							icon="ui-icon-check">
						</p:commandButton>
					</center>
				</f:facet>
				</p:dataTable>
				
				
			
		</h:form>
		<!--Postulante -->
		
		<!-- Dialog nuevo telefono -->
		<p:dialog id="saveTelefonoDlg" header="Nuevo teléfono"
			hideEffect="explode" widgetVar="saveTelefonoDialog"
			resizable="false" modal="true" appendTo="@(body)">
			<h:form>
				<p:panelGrid columns="2">
					<h:outputText value="Descripción: " />
					<p:inputText value="#{postulanteManagedBean.newTelefono.teleDescripcion}" />
					<h:outputText value="Número: " />
					<p:inputText value="#{postulanteManagedBean.newTelefono.teleNum}" />
					<f:facet name="footer">
						<p:commandButton value="Guardar"
							actionListener="#{postulanteManagedBean.saveTelefono()}"							
							oncomplete="saveTelefonoDialog.hide()"
							update=":formPostulante:dataTableTelefono"
							icon="ui-icon-check" />
						<p:commandButton value="Cancelar"
							onclick="saveTelefonoDialog.hide()" type="button"
							icon="ui-icon-close" />
					</f:facet>
				</p:panelGrid>
			</h:form>
		</p:dialog>
		<!-- Fin Dialog nuevo telefono -->

	</ui:define>
</ui:composition>